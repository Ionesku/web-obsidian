# Изменения в поисковом интерфейсе

## Что исправлено:

### 1. Ctrl+F для локального поиска ✅
- Добавлен перехват `Ctrl+F` через `document.addEventListener` с `capture: true`
- Открывается всплывающее окно поиска в правом верхнем углу редактора
- Закрывается по `Esc`

### 2. Реорганизация верхней панели ✅
Иконки теперь расположены в следующем порядке (сверху вниз):
1. **Collapse** - сворачивание/разворачивание боковой панели
2. **Bookmarks** - закладки (пока без функционала)
3. **Find** (Search) - открывает боковую панель поиска
4. **Files** - открывает боковую панель файлов
5. Разделитель
6. Daily Notes, Quick Switcher, Templates, Canvas, Vim Mode

### 3. Клик по тегу открывает поиск ✅
- При клике на тег в редакторе:
  - Формируется запрос `tag:название_тега`
  - Открывается боковая панель поиска
  - Закрывается боковая панель файлов
  - Запрос передается в компонент Search через `initialQuery`

### 4. Полнотекстовый поиск через Search компонент
- Компонент Search теперь принимает `initialQuery` prop
- При получении `initialQuery` автоматически выполняется поиск
- Используется федеративный поиск через `federatedSearch()`
- Результаты кликабельны и открывают соответствующий файл

## Технические детали:

### Изменения в `frontend/src/pages/Vault.tsx`:
- Добавлен `localSearchInput` и `showLocalSearch` для Ctrl+F
- Добавлен `showSearchSidebar` и `showFilesSidebar` для переключения панелей
- `handleTagClick` теперь устанавливает запрос в store и открывает поиск
- Keyboard shortcuts используют `document.addEventListener` с `capture: true`
- Search компонент получает `searchQuery` из store

### Изменения в `frontend/src/components/Search.tsx`:
- Добавлен prop `initialQuery`
- При получении `initialQuery` автоматически выполняется `performSearch`
- `onResultClick` callback для навигации к файлу

## Как использовать:

1. **Локальный поиск**: Нажмите `Ctrl+F` в редакторе
2. **Глобальный поиск**: Нажмите иконку лупы (Find) в левой панели
3. **Поиск по тегу**: Кликните на любой тег в документе (например, `#utils`)
4. **Переключение панелей**: Иконки Find и Files переключают соответствующие панели

## Известные ограничения:

- Локальный поиск (Ctrl+F) пока не подсвечивает результаты в редакторе
- Требуется реализация CodeMirror extension для подсветки

